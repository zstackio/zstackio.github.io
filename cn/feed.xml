<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>ZStack</title>
    <description>ZStack is open source IaaS software managing resources of compute, storage, networking throughout a datacenter all by APIs.</description>
    <link>http://zstack.org/</link>
    <atom:link href="http://zstack.org/feed.xml" rel="self" type="application/rss+xml" />
    <pubDate>Wed, 27 Nov 2019 12:40:57 +0800</pubDate>
    <lastBuildDate>Wed, 27 Nov 2019 12:40:57 +0800</lastBuildDate>
    <generator>Jekyll v2.5.3</generator>
    
      <item>
        <title>ZStack v2.0.2 release</title>
        <description>&lt;p&gt;Hello everyone, I am Yongkang You, the COO of ZStack. Today I am happy to announce that ZStack v2.0.2 is released.&lt;/p&gt;

&lt;p&gt;We did not update zstack.org for a long time, because we were continuing building much more powerful ZStack.
We did a lot of things in the past 1 year, e.g. releasing ZStack Enterprise with multiple languages, launching new Chinese website http://www.zstack.io and also adding more network services like VxLAN, load balance and IP-SEC.&lt;/p&gt;

&lt;p&gt;We got series A round funding from Alibaba Cloud and grew up with a bigger team.&lt;/p&gt;

&lt;p&gt;ZStack has built a firmed community in China. Hundreds of private clouds are using ZStack.
ele.me (the biggest online food ordering company) has a ZStack environment managing more than 1400 physical servers,
which supporting millions of orders every day.&lt;/p&gt;

&lt;h1&gt;New Features And Enhancements&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;VxLAN&lt;/li&gt;
&lt;li&gt;New Enterprise UI&lt;/li&gt;
&lt;li&gt;New virtual router network service&lt;/li&gt;
&lt;li&gt;ZStack OS&lt;/li&gt;
&lt;li&gt;Performance mornitor (Enterprise feature)&lt;/li&gt;
&lt;li&gt;Billing (Enterprise feature)&lt;/li&gt;
&lt;li&gt;VPN(IP-Sec) (Enterprise feature)&lt;/li&gt;
&lt;li&gt;VM QoS (Enterprise feature)&lt;/li&gt;
&lt;li&gt;Memory/CPU/Storage Overprovision  (Enterprise feature)&lt;/li&gt;
&lt;li&gt;VM HA (Enterprise feature)&lt;/li&gt;
&lt;li&gt;LDAP (Enterprise feature)&lt;/li&gt;
&lt;li&gt;VCenter management (Enterprise feature)&lt;/li&gt;
&lt;li&gt;VM password resetting by QGA (Enterprise feature)&lt;/li&gt;
&lt;li&gt;VM console password (Enterprise feature)&lt;/li&gt;
&lt;li&gt;VM online cloning (Enterprise feature)&lt;/li&gt;
&lt;li&gt;VM CPU/Memory online hot-add (Enterprise feature)&lt;/li&gt;
&lt;li&gt;VM operation log (Enterprise feature)&lt;/li&gt;
&lt;li&gt;VM attach/detach ISO (Enterprise feature)&lt;/li&gt;
&lt;/ul&gt;


&lt;h1&gt;Installation And Upgrade&lt;/h1&gt;

&lt;p&gt;You can follow &lt;a href=&quot;../installation/index.md&quot;&gt;Installation Manual&lt;/a&gt; to install the 2.0.2 release.&lt;/p&gt;
</description>
        <pubDate>Sun, 25 Jun 2017 00:00:00 +0800</pubDate>
        <link>http://zstack.org/blog/v2.0.2.html</link>
        <guid isPermaLink="true">http://zstack.org/blog/v2.0.2.html</guid>
        
        
        <category>blog</category>
        
      </item>
    
      <item>
        <title>ZStack v2.0.2 release</title>
        <description>&lt;p&gt;Hello everyone, I am Yongkang You, the COO of ZStack. Today I am happy to announce that ZStack v2.0.2 is released.&lt;/p&gt;

&lt;p&gt;We did not update zstack.org for a long time, because we were continuing building much more powerful ZStack.
We did a lot of things in the past 1 year, e.g. releasing ZStack Enterprise with multiple languages, launching new Chinese website http://www.zstack.io and also adding more network services like VxLAN, load balance and IP-SEC.&lt;/p&gt;

&lt;p&gt;We got series A round funding from Alibaba Cloud and grew up with a bigger team.&lt;/p&gt;

&lt;p&gt;ZStack has built a firmed community in China. Hundreds of private clouds are using ZStack.
ele.me (the biggest online food ordering company) has a ZStack environment managing more than 1400 physical servers,
which supporting millions of orders every day.&lt;/p&gt;

&lt;h1&gt;New Features And Enhancements&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;VxLAN&lt;/li&gt;
&lt;li&gt;New Enterprise UI&lt;/li&gt;
&lt;li&gt;New virtual router network service&lt;/li&gt;
&lt;li&gt;ZStack OS&lt;/li&gt;
&lt;li&gt;Performance mornitor (Enterprise feature)&lt;/li&gt;
&lt;li&gt;Billing (Enterprise feature)&lt;/li&gt;
&lt;li&gt;VPN(IP-Sec) (Enterprise feature)&lt;/li&gt;
&lt;li&gt;VM QoS (Enterprise feature)&lt;/li&gt;
&lt;li&gt;Memory/CPU/Storage Overprovision  (Enterprise feature)&lt;/li&gt;
&lt;li&gt;VM HA (Enterprise feature)&lt;/li&gt;
&lt;li&gt;LDAP (Enterprise feature)&lt;/li&gt;
&lt;li&gt;VCenter management (Enterprise feature)&lt;/li&gt;
&lt;li&gt;VM password resetting by QGA (Enterprise feature)&lt;/li&gt;
&lt;li&gt;VM console password (Enterprise feature)&lt;/li&gt;
&lt;li&gt;VM online cloning (Enterprise feature)&lt;/li&gt;
&lt;li&gt;VM CPU/Memory online hot-add (Enterprise feature)&lt;/li&gt;
&lt;li&gt;VM operation log (Enterprise feature)&lt;/li&gt;
&lt;li&gt;VM attach/detach ISO (Enterprise feature)&lt;/li&gt;
&lt;/ul&gt;


&lt;h1&gt;Installation And Upgrade&lt;/h1&gt;

&lt;p&gt;You can follow &lt;a href=&quot;../installation/index.md&quot;&gt;Installation Manual&lt;/a&gt; to install the 2.0.2 release.&lt;/p&gt;
</description>
        <pubDate>Sun, 25 Jun 2017 00:00:00 +0800</pubDate>
        <link>http://zstack.org/cn/blog/v2.0.2.html</link>
        <guid isPermaLink="true">http://zstack.org/cn/blog/v2.0.2.html</guid>
        
        
        <category>blog</category>
        
      </item>
    
      <item>
        <title>ZStack v1.3 release</title>
        <description>&lt;p&gt;Hello everyone, I am Frank Zhang, the architect of ZStack. Today I am happy to
announce that ZStack v1.3 is released.&lt;/p&gt;

&lt;h1&gt;New Features And Enhancements&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#actualsize&quot;&gt;Supporting both virtual size and actual size for images and volumes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cpu&quot;&gt;CPU over-provisioning&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#startvm&quot;&gt;Specifying target host or cluster when starting a VM&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#staticip&quot;&gt;Specifying static IP when attaching a L3 network&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#sshport&quot;&gt;Specifying SSH port when adding KVM hosts or SFTP backup storage&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#log&quot;&gt;Log collection tool&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#fusionstor&quot;&gt;Supporting fusionstor as primary and backup storage&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;h1&gt;Installation And Upgrade&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#install&quot;&gt;Installation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#upgrade&quot;&gt;Upgrade&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;h2 id=&quot;actualsize&quot;&gt; 1. Supporting Both Virtual Size And Actual Size For Images And Volumes&lt;/h2&gt;


&lt;p&gt;ZStack uses thin-provisioning when creating VM volumes; a volume or image has two sizes, a virtual size indicating the
max capacity and a actual size indicating the capacity allocated. In previous version, users can only see the actual
size of a image and the virtual size of a volume. In this version, virtual size and actual size are all supported for images
and volumes.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.3/1.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;p&gt;For volumes, a new API &lt;code&gt;SyncVolumeSize&lt;/code&gt; is added for users to get the volume&#39;s actual size at runtime.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt;SyncVolumeSize uuid=e9fc82e23cd14d8aa33d1304cb1f5f87
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;cpu&quot;&gt;2. CPU over-provisioning&lt;/h2&gt;


&lt;p&gt;In this version, a confusing term &lt;code&gt;cpu speed&lt;/code&gt; is removed from the VM instance and the instance offering. The VCPU usage is only
counted by the VCPU number. Users can specify the over-provisioning ratio of VCPU by a global configuration.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt;UpdateGlobalConfig category=host name=cpu.overProvisioning.ratio value=20
&lt;/code&gt;&lt;/pre&gt;

&lt;blockquote&gt;&lt;p&gt;The default VCPU over-provisioning ratio is 10, which means one physical core(from Linux perspective) can be allocated as 10
VCPUs.&lt;/p&gt;&lt;/blockquote&gt;

&lt;h2 id=&quot;startvm&quot;&gt;3. Specifying the target host or cluster when starting a VM&lt;/h2&gt;


&lt;p&gt;In this version, users can specify the target host or cluster when starting a stopped VM.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt;StartVmInstance uuid=554d67a78c40475cbe4e8e0cdf6adc44 hostUuid=c2025197915944acaf0435c0c1a44f96
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;or&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt;StartVmInstance uuid=554d67a78c40475cbe4e8e0cdf6adc44 clusterUuid==c2025197915944acaf0435c0c1a44f96
&lt;/code&gt;&lt;/pre&gt;

&lt;blockquote&gt;&lt;p&gt;This only works if the primary storage is network shared storage, for example, NFS. For local storage that
volumes are allocated on hosts&#39; disk, a VM cannot start on any other hosts other than the one which its root
volume is on.&lt;/p&gt;&lt;/blockquote&gt;

&lt;h2 id=&quot;staticip&quot;&gt;4. Specifying static IP when attaching a L3 network&lt;/h2&gt;


&lt;p&gt;In this version, users can specify a static IP when attaching a L3 network to a VM.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt; &amp;gt;&amp;gt;&amp;gt;AttachL3NetworkToVm l3NetworkUuid=23e15a6acc80431fa0f1763ab45ae144 vmInstanceUuid=b7ba300853974189b7adc90f2c25e00b staticIp=192.168.1.10
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;sshport&quot;&gt;5. Specifying SSH port when adding KVM hosts or SFTP backup storage&lt;/h2&gt;


&lt;p&gt;In this version, users can specify the SSH port that is used by Ansible when adding a KVM host or a SFTP backup storage.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.3/2.png&quot; class=&quot;center-img img-responsive&quot;&gt;
&lt;img src=&quot;/images/1.3/3.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;log&quot;&gt;6. Log collection tool&lt;/h2&gt;


&lt;p&gt;In this version, a tool archiving various logs is added for users reporting bugs to ZStack community. The tool is implemented as
a &lt;code&gt;zstack-ctl&lt;/code&gt; command and is easy to use.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.3/4.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;fusionstor&quot;&gt;6. Supporting fusionstor as primary and backup storage&lt;/h2&gt;


&lt;p&gt;In this version, HuaYunWangJi&#39;s commercial storage system &lt;em&gt;fusionstor&lt;/em&gt; is supported as primary storage and backup storage. It
works just like Ceph, users can add it through ZStack&#39;s UI easily;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.3/5.png&quot; class=&quot;center-img img-responsive&quot;&gt;
&lt;img src=&quot;/images/1.3/6.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;install&quot;&gt;7. Installation&lt;/h2&gt;


&lt;p&gt;You can install the 1.3 release by:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    wget http://download.zstack.org/releases/1.3/1.3.0/zstack-installer-1.3.0.bin
    bash zstack-installer-1.3.0.bin -R aliyun
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;upgrade&quot;&gt;8. Upgrade&lt;/h2&gt;


&lt;p&gt;You can upgrade your previous ZStack to 1.3 by:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    wget http://download.zstack.org/releases/1.3/1.3.0/zstack-installer-1.3.0.bin
    bash zstack-installer-1.3.0.bin -u
&lt;/code&gt;&lt;/pre&gt;
</description>
        <pubDate>Mon, 06 Jun 2016 00:00:00 +0800</pubDate>
        <link>http://zstack.org/blog/v1.3.html</link>
        <guid isPermaLink="true">http://zstack.org/blog/v1.3.html</guid>
        
        
        <category>blog</category>
        
      </item>
    
      <item>
        <title>ZStack v1.3 release</title>
        <description>&lt;p&gt;Hello everyone, I am Frank Zhang, the architect of ZStack. Today I am happy to
announce that ZStack v1.3 is released.&lt;/p&gt;

&lt;h1&gt;New Features And Enhancements&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#actualsize&quot;&gt;Supporting both virtual size and actual size for images and volumes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cpu&quot;&gt;CPU over-provisioning&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#startvm&quot;&gt;Specifying target host or cluster when starting a VM&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#staticip&quot;&gt;Specifying static IP when attaching a L3 network&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#sshport&quot;&gt;Specifying SSH port when adding KVM hosts or SFTP backup storage&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#log&quot;&gt;Log collection tool&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#fusionstor&quot;&gt;Supporting fusionstor as primary and backup storage&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;h1&gt;Installation And Upgrade&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#install&quot;&gt;Installation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#upgrade&quot;&gt;Upgrade&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;h2 id=&quot;actualsize&quot;&gt; 1. Supporting Both Virtual Size And Actual Size For Images And Volumes&lt;/h2&gt;


&lt;p&gt;ZStack uses thin-provisioning when creating VM volumes; a volume or image has two sizes, a virtual size indicating the
max capacity and a actual size indicating the capacity allocated. In previous version, users can only see the actual
size of a image and the virtual size of a volume. In this version, virtual size and actual size are all supported for images
and volumes.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.3/1.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;p&gt;For volumes, a new API &lt;code&gt;SyncVolumeSize&lt;/code&gt; is added for users to get the volume&#39;s actual size at runtime.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt;SyncVolumeSize uuid=e9fc82e23cd14d8aa33d1304cb1f5f87
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;cpu&quot;&gt;2. CPU over-provisioning&lt;/h2&gt;


&lt;p&gt;In this version, a confusing term &lt;code&gt;cpu speed&lt;/code&gt; is removed from the VM instance and the instance offering. The VCPU usage is only
counted by the VCPU number. Users can specify the over-provisioning ratio of VCPU by a global configuration.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt;UpdateGlobalConfig category=host name=cpu.overProvisioning.ratio value=20
&lt;/code&gt;&lt;/pre&gt;

&lt;blockquote&gt;&lt;p&gt;The default VCPU over-provisioning ratio is 10, which means one physical core(from Linux perspective) can be allocated as 10
VCPUs.&lt;/p&gt;&lt;/blockquote&gt;

&lt;h2 id=&quot;startvm&quot;&gt;3. Specifying the target host or cluster when starting a VM&lt;/h2&gt;


&lt;p&gt;In this version, users can specify the target host or cluster when starting a stopped VM.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt;StartVmInstance uuid=554d67a78c40475cbe4e8e0cdf6adc44 hostUuid=c2025197915944acaf0435c0c1a44f96
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;or&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt;StartVmInstance uuid=554d67a78c40475cbe4e8e0cdf6adc44 clusterUuid==c2025197915944acaf0435c0c1a44f96
&lt;/code&gt;&lt;/pre&gt;

&lt;blockquote&gt;&lt;p&gt;This only works if the primary storage is network shared storage, for example, NFS. For local storage that
volumes are allocated on hosts&#39; disk, a VM cannot start on any other hosts other than the one which its root
volume is on.&lt;/p&gt;&lt;/blockquote&gt;

&lt;h2 id=&quot;staticip&quot;&gt;4. Specifying static IP when attaching a L3 network&lt;/h2&gt;


&lt;p&gt;In this version, users can specify a static IP when attaching a L3 network to a VM.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt; &amp;gt;&amp;gt;&amp;gt;AttachL3NetworkToVm l3NetworkUuid=23e15a6acc80431fa0f1763ab45ae144 vmInstanceUuid=b7ba300853974189b7adc90f2c25e00b staticIp=192.168.1.10
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;sshport&quot;&gt;5. Specifying SSH port when adding KVM hosts or SFTP backup storage&lt;/h2&gt;


&lt;p&gt;In this version, users can specify the SSH port that is used by Ansible when adding a KVM host or a SFTP backup storage.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.3/2.png&quot; class=&quot;center-img img-responsive&quot;&gt;
&lt;img src=&quot;/images/1.3/3.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;log&quot;&gt;6. Log collection tool&lt;/h2&gt;


&lt;p&gt;In this version, a tool archiving various logs is added for users reporting bugs to ZStack community. The tool is implemented as
a &lt;code&gt;zstack-ctl&lt;/code&gt; command and is easy to use.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.3/4.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;fusionstor&quot;&gt;6. Supporting fusionstor as primary and backup storage&lt;/h2&gt;


&lt;p&gt;In this version, HuaYunWangJi&#39;s commercial storage system &lt;em&gt;fusionstor&lt;/em&gt; is supported as primary storage and backup storage. It
works just like Ceph, users can add it through ZStack&#39;s UI easily;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.3/5.png&quot; class=&quot;center-img img-responsive&quot;&gt;
&lt;img src=&quot;/images/1.3/6.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;install&quot;&gt;7. Installation&lt;/h2&gt;


&lt;p&gt;You can install the 1.3 release by:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    wget http://download.zstack.org/releases/1.3/1.3.0/zstack-installer-1.3.0.bin
    bash zstack-installer-1.3.0.bin -R aliyun
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;upgrade&quot;&gt;8. Upgrade&lt;/h2&gt;


&lt;p&gt;You can upgrade your previous ZStack to 1.3 by:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    wget http://download.zstack.org/releases/1.3/1.3.0/zstack-installer-1.3.0.bin
    bash zstack-installer-1.3.0.bin -u
&lt;/code&gt;&lt;/pre&gt;
</description>
        <pubDate>Mon, 06 Jun 2016 00:00:00 +0800</pubDate>
        <link>http://zstack.org/cn/blog/v1.3.html</link>
        <guid isPermaLink="true">http://zstack.org/cn/blog/v1.3.html</guid>
        
        
        <category>blog</category>
        
      </item>
    
      <item>
        <title>ZStack v1.3.1 发布</title>
        <description>&lt;h2&gt;ZStack 1.3.1 版本今天发布&lt;/h2&gt;

&lt;p&gt;ZStack 1.3版本的第一个更新版本今天发布，请之前全新安装ZStack 1.3版本和Virtual Router(虚拟路由)的用户需要尽快升级。
在该版中，我们修复了1.3版本中 Qemu 2.3 版本的一个缺陷。该缺陷会导致新创建的Virtual Router无法正确的获取IP地址。&lt;/p&gt;

&lt;h2&gt;修复的缺陷&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;虚拟路由器无法获取IP地址&lt;/li&gt;
&lt;/ul&gt;


&lt;h2&gt;安装升级&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#install&quot;&gt;安装&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#offlineinstall&quot;&gt;离线安装&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#upgrade&quot;&gt;升级&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;h3 id=&quot;install&quot;&gt;1. 安装&lt;/h3&gt;


&lt;p&gt;你可以通过下面方式安装：&lt;/p&gt;

&lt;p&gt;   wget http://download.zstack.org/releases/1.3/1.3.1/zstack-installer-1.3.1.bin
   bash zstack-installer-1.3.1.bin -R aliyun&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;这里&lt;code&gt;-R aliyun&lt;/code&gt;参数指定使用阿里云的源进行安装，你也可以使用&lt;code&gt;-R 163&lt;/code&gt;使用网易的源。我们推荐使用阿里云的源&lt;/p&gt;&lt;/blockquote&gt;

&lt;h3 id=&quot;offlineinstall&quot;&gt;2. 离线安装&lt;/h3&gt;


&lt;p&gt;针对内网用户,以及访问Internet速度较慢的用户.ZStack 1.3 提供了离线安装方式.
用户若需要离线安装ZStack,需要在目标管理节点和计算节点上安装CentOS 7.2 ZStack社区版.&lt;/p&gt;

&lt;p&gt;然后在下载了第8步中的 zstack-installer 之后,你可以通过下面方式快速完成离线安装：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;bash zstack-installer-1.3.1.bin -o
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;具体的离线安装教程和CentOS 7.2 ZStack社区版请阅读: &lt;a href=&quot;./offline-install-zstack-from-custom-iso.html&quot;&gt;ZStack离线安装教程&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;upgrade&quot;&gt;3. 升级 &lt;/h3&gt;


&lt;p&gt;一如既往的，我们支持一键无缝升级：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;wget http://download.zstack.org/releases/1.3/1.3.1/zstack-installer-1.3.1.bin
bash zstack-installer-1.3.1.bin -u
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;多节点升级中的zstack.war文件可以从下面的链接下载：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;wget http://download.zstack.org/releases/1.3/1.3.1/zstack.war
&lt;/code&gt;&lt;/pre&gt;
</description>
        <pubDate>Wed, 01 Jun 2016 00:00:00 +0800</pubDate>
        <link>http://zstack.org/cn_blog/v1.3.1.html</link>
        <guid isPermaLink="true">http://zstack.org/cn_blog/v1.3.1.html</guid>
        
        
        <category>cn_blog</category>
        
      </item>
    
      <item>
        <title>ZStack v1.3 发布</title>
        <description>&lt;h2&gt;ZStack 1.3 版本今天正式发布&lt;/h2&gt;

&lt;p&gt;ZStack 1.3版本今天发布，欢迎大家下载试用。在该版中，我们修复了1.2版本中发现的bug，新增了如下功能；image/volume的virtual size/actual size支持，CPU超分设置，启动VM的时候指定集群（cluster）或物理机，加载L3网络到虚拟机时指定IP等功能。此外，该版本包含了华云网际贡献的fusionstor插件，用户可以使用华云网际的商业存储fusionstor作为备份存储和主存储。具体细节参考以下章节。&lt;/p&gt;

&lt;h2&gt;新增功能&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#actualsize&quot;&gt;Image/Volume的actual size/virtual size支持&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cpu&quot;&gt;CPU超分&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#startvm&quot;&gt;启动VM指定集群或物理机&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#staticip&quot;&gt;加载L3网络指定静态IP&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#log&quot;&gt;日志收集工具&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#qemu&quot;&gt;社区版ISO安装升级到QEMU2.3版本&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#fusionstor&quot;&gt;华云网际fusionstor支持&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;h2&gt;安装升级&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#install&quot;&gt;安装&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#offlineinstall&quot;&gt;离线安装&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#upgrade&quot;&gt;升级&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;h3 id=&quot;actualsize&quot;&gt;1. Image/Volume实际容量 &lt;/h3&gt;


&lt;p&gt;在使用thin-provisioning（又称thin-clone）技术的时候，一个qcow2文件有两个容量：表示物理大小的真实容量(actual size)和表示用户申请空间大小的容量（virtual size）。在之前的zstack版本中 ，对于image，用户只能看到actual size，对于volume，只能看到virtual size。从1.3版本开始，image和volume都同时支持actual size和virtual size，这样用户既能知道该image/volume目前的物理大小，也可以知道表示其容量上限的virtual size。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.3/1.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;p&gt;对于volume，由于其actual size会随用户对磁盘的使用不断增长，我们新加了一个API方便用户能实时获取volume当前的actual size:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    &amp;gt;&amp;gt;&amp;gt;SyncVolumeSize uuid=e9fc82e23cd14d8aa33d1304cb1f5f87
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;cpu&quot;&gt;2. CPU超分设定&lt;/h3&gt;


&lt;p&gt;在之前的zstack版本中，我们引入了一个对应VM CPU权重的概念cpu speed，给用户造成了很大困惑。在1.3版本中，我们已将其去掉。用户创建VM时只需要执行VCPU的数量即可。用户可以通过设置一个 全局配置来执行物理机CPU的超分比例:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    &amp;gt;&amp;gt;&amp;gt;UpdateGlobalConfig category=host name=cpu.overProvisioning.ratio value=20
&lt;/code&gt;&lt;/pre&gt;

&lt;blockquote&gt;&lt;p&gt;默认CPU超分比例是10，即一个Linux操作系统可见的物理CPU可以分配10 VCPU供VM使用。例如一个4 CPU物理机，则可以虚出40个VCPU。&lt;/p&gt;&lt;/blockquote&gt;

&lt;h3 id=&quot;startvm&quot;&gt;3. 启动VM时指定cluster或host&lt;/h3&gt;


&lt;p&gt;在该版本中，用户可以在启动一个停止的VM时，指定该VM从启动的cluster或host：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    &amp;gt;&amp;gt;&amp;gt;StartVmInstance uuid=554d67a78c40475cbe4e8e0cdf6adc44 hostUuid=c2025197915944acaf0435c0c1a44f96
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;或&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    &amp;gt;&amp;gt;&amp;gt;StartVmInstance uuid=554d67a78c40475cbe4e8e0cdf6adc44 clusterUuid==c2025197915944acaf0435c0c1a44f96
&lt;/code&gt;&lt;/pre&gt;

&lt;blockquote&gt;&lt;p&gt;该功能只对使用共享主存储（例如NFS）的VM有效，对于使用本地存储的VM，由于VM的根磁盘在物理机的硬盘上，无法跨物理机启动&lt;/p&gt;&lt;/blockquote&gt;

&lt;h3 id=&quot;staticip&quot;&gt;4. 加载L3网络指定静态IP&lt;/h3&gt;


&lt;p&gt;在该版本中，用户可以在给一个VM加载L3网络的时候指定静态IP：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    &amp;gt;&amp;gt;&amp;gt;AttachL3NetworkToVm l3NetworkUuid=23e15a6acc80431fa0f1763ab45ae144 vmInstanceUuid=b7ba300853974189b7adc90f2c25e00b staticIp=192.168.1.10
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;sshport&quot;&gt;5. 添加host、backup storage时指定ssh端口以及使用非root用户&lt;/h3&gt;


&lt;p&gt;从该版本开始，在添加host、sftp backup storage、ceph primary storage、ceph backup storage时，可以指定ssh端口，以及使用非root的用户名:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.3/2.png&quot; class=&quot;center-img img-responsive&quot;&gt;
&lt;img src=&quot;/images/1.3/3.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;h3 id=&quot;log&quot;&gt;6. 日志收集工具&lt;/h3&gt;


&lt;p&gt;为了方便用户在调试zstack的时候收集日志，在1.3版本中我们新加了一个zstack-ctl collect_log命令用于自动收集并打包相关日志：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.3/4.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;h3 id=&quot;qemu&quot;&gt;7. 社区版ISO安装升级到QEMU2.3版本&lt;/h3&gt;


&lt;p&gt;在最新的ZStack 1.3社区版ISO中，我们已经将QEMU升级到了2.3版本，该版本支持VM的在线快照功能，用户无需停止VM即可以生成快照。该ISO的下载链接在：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    http://download.zstack.org/ISO/ZStack-Community-x86_64-DVD-1.3.0.iso
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;百度云盘:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    http://pan.baidu.com/s/1hsqCEfa
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;fusionstor&quot;&gt;8. 华云网际fusionstor插件&lt;/h3&gt;


&lt;p&gt;在1.3版本中，华云网际公司贡献了其商业存储fusionstor的插件，用户可以直接在ZStack UI上添加fusionstor作为主存储和备份存储&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.3/5.png&quot; class=&quot;center-img img-responsive&quot;&gt;
&lt;img src=&quot;/images/1.3/6.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;h3 id=&quot;install&quot;&gt;9. 安装&lt;/h3&gt;


&lt;p&gt;你可以通过下面方式安装：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    wget http://download.zstack.org/releases/1.3/1.3.0/zstack-installer-1.3.0.bin
    bash zstack-installer-1.3.0.bin -R aliyun
&lt;/code&gt;&lt;/pre&gt;

&lt;blockquote&gt;&lt;p&gt;这里&lt;code&gt;-R aliyun&lt;/code&gt;参数指定使用阿里云的源进行安装，你也可以使用&lt;code&gt;-R 163&lt;/code&gt;使用网易的源。我们推荐使用阿里云的源&lt;/p&gt;&lt;/blockquote&gt;

&lt;h3 id=&quot;offlineinstall&quot;&gt;10. 离线安装&lt;/h3&gt;


&lt;p&gt;针对内网用户,以及访问Internet速度较慢的用户.ZStack 1.3 提供了离线安装方式.
用户若需要离线安装ZStack,需要在目标管理节点和计算节点上安装CentOS 7.2 ZStack社区版.&lt;/p&gt;

&lt;p&gt;然后在下载了第8步中的 zstack-installer 之后,你可以通过下面方式快速完成离线安装：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    bash zstack-installer-1.3.0.bin -o
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;具体的离线安装教程和CentOS 7.2 ZStack社区版请阅读: &lt;a href=&quot;./offline-install-zstack-from-custom-iso.html&quot;&gt;ZStack离线安装教程&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;upgrade&quot;&gt;11. 升级 &lt;/h3&gt;


&lt;p&gt;一如既往的，我们支持一键无缝升级：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    wget http://download.zstack.org/releases/1.3/1.3.0/zstack-installer-1.3.0.bin
    bash zstack-installer-1.3.0.bin -u
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;多节点升级中的zstack.war文件可以从下面的链接下载：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;            wget http://download.zstack.org/releases/1.3/1.3.0/zstack.war
&lt;/code&gt;&lt;/pre&gt;
</description>
        <pubDate>Mon, 30 May 2016 00:00:00 +0800</pubDate>
        <link>http://zstack.org/cn_blog/v1.3.html</link>
        <guid isPermaLink="true">http://zstack.org/cn_blog/v1.3.html</guid>
        
        
        <category>cn_blog</category>
        
      </item>
    
      <item>
        <title>ZStack v1.2 release</title>
        <description>&lt;p&gt;Hello everyone, I am Frank Zhang, the architect of ZStack. Today I am happy to
announce that ZStack v1.2 is released.&lt;/p&gt;

&lt;h1&gt;New Features And Enhancements&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#eip&quot;&gt;Distributed EIP&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#smp&quot;&gt;Shared Mount Point Primary Storage&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#db&quot;&gt;Database Periodical Backup&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#systemd&quot;&gt;Systemd Support&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cachemode&quot;&gt;KVM Cache Mode&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#userdata&quot;&gt;AWS EC2 Like Userdata&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;h1&gt;Installation And Upgrade&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#install&quot;&gt;Installation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#upgrade&quot;&gt;Upgrade&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;h2 id=&quot;eip&quot;&gt; 1. Distributed EIP &lt;/h2&gt;


&lt;p&gt;Distributed EIP is added as a new service type of flat network provider in this version. Users can apply an EIP(normally a public IP) to a VM on a private network dynamically without using a virtual router VM, since the EIP is created on the host where the VM is running. As the EIPs are scattered on different hosts we call it distributed EIP. Below is an overall architecutre showing that the distributed EIP is implemented through the Linux network namspace.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.2/eipoverview.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;p&gt;To enable the distributed EIP, users need to select the EIP service of the flat network service provider at the last step of creating a L3 network.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.2/eip1.png&quot; class=&quot;center-img img-responsive&quot;&gt;
&lt;img src=&quot;/images/1.2/eip2.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;p&gt;For the usage of EIP, please refer the chapter 15 of the tutorial &lt;a href=&quot;http://zstack.org/tutorials/ec2-ui.html&quot;&gt;Amazon EC2 classic EIP zone&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;smp&quot;&gt;2. Shared Mount Point Primary Storage&lt;/h2&gt;


&lt;p&gt;In order to support vast POSIX compatible distributed filesystems, we add a new type of primary storage called shared mount point storage in this version. The idea is that users can use any distributed filesystems(e.g. OCFS2, GlusterFS, MooseFS) as primary storage, as long as those filesystems are pre-mounted on the KVM hosts.&lt;/p&gt;

&lt;p&gt;Below is an example of adding a shared mount point primary storage, the URL is the absolute path of the folder where the distributed filesystem is
mounted.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;we suggest users changing /etc/rc.local or /etc/fstab to make the distributed filesystem automatically mount during Linux booting, otherwise you
will be unable to start a created VM or create a VM on your local storage.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.2/smp.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;db&quot;&gt;3. Database Periodical Backup&lt;/h2&gt;


&lt;p&gt;In this version, a new command &lt;code&gt;zstack-ctl dump_mysql&lt;/code&gt; is added for users to backup ZStack database.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    [root@172-20-12-46 ~]# zstack-ctl dump_mysql -h
    usage: zstackctl dump_mysql [-h] [--file-name FILE_NAME]
                          [--keep-amount KEEP_AMOUNT]

    optional arguments:
    -h, --help            show this help message and exit
    --file-name FILE_NAME
                        The filename you want to save the database, default is
                        &#39;zstack-backup-db&#39;
    --keep-amount KEEP_AMOUNT
                        The amount of backup files you want to keep, older
                        backup files will be deleted, default number is 60
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Once the all-in-one installation is done, a &lt;code&gt;crontab&lt;/code&gt; task is created as following to periodically backup your database:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  30 0,12 * * * zstack-ctl dump_mysql --keep-amount 14
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;you can change the setting by &lt;code&gt;crontab -e&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;systemd&quot;&gt;4. Systemd Support&lt;/h2&gt;


&lt;p&gt;Systemd is supported in this version. You can use &lt;code&gt;systemctl&lt;/code&gt; to control ZStack management nodes&#39; lifecycle and make them start during Linux booting.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.2/systemd.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;cachemode&quot;&gt;5. KVM Cache Mode&lt;/h2&gt;


&lt;p&gt;In this version, users can configure the &lt;code&gt;cache mode&lt;/code&gt; of volumes on the KVM hosts by a global configuration. There are three modes supported now:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;none&lt;/strong&gt;: With caching mode set to none, the host page cache is disabled, but the disk write cache is enabled for the guest. In this mode, the write performance in the guest is optimal because write operations bypass the host page cache and go directly to the disk write cache. If the disk write cache is battery-backed, or if the applications or storage stack in the guest transfer data properly (either through fsync operations or file system barriers), then data integrity can be ensured. However, because the host page cache is disabled, the read performance in the guest would not be as good as in the modes where the host page cache is enabled, such as writethrough mode.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;writeback&lt;/strong&gt;: With caching set to writeback mode, both the host page cache and the disk write cache are enabled for the guest. Because of this, the I/O performance for applications running in the guest is good, but the data is not protected in a power failure. As a result, this caching mode is recommended only for temporary data where potential data loss is not a concern.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;writethrough&lt;/strong&gt;: writethrough mode is the default caching mode. With caching set to writethrough mode, the host page cache is enabled, but the disk write cache is disabled for the guest. Consequently, this caching mode ensures data integrity even if the applications and storage stack in the guest do not transfer data to permanent storage properly (either through fsync operations or file system barriers). Because the host page cache is enabled in this mode, the read performance for applications running in the guest is generally better. However, the write performance might be reduced because the disk write cache is disabled.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;For details of KVM cache mode you can refer &lt;a href=&quot;https://www.ibm.com/support/knowledgecenter/linuxonibm/liaat/liaatbpkvmguestcache.htm&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The global configuration can be changed through UI or command line:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.2/cachemode.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt;&amp;gt;UpdateGlobalConfig category=kvm name=vm.cacheMode value=writethrough
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;userdata&quot;&gt;6. AWS EC2 Way To Access Userdata&lt;/h2&gt;


&lt;p&gt;Beginning at the version 1.0, ZStack supports AWS EC2 userdata with cloud-init. However, the original way to access userdata is CloudStack like, which requires users to change the default configuration of cloud-init package and sometimes make people confused. In this version, ZStack starts using AWS EC2 way to distribute userdata, which means users can access userdata/metadata by a special IP address(169.254.169.254). It&#39;s also the default way that cloud-init fetches userdata, so users can directly use cloud-init built-in packages from CentOS and Ubuntu, without any modification.&lt;/p&gt;

&lt;h2 id=&quot;install&quot;&gt;7. Installation&lt;/h2&gt;


&lt;p&gt;You can install the 1.2 release by:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    wget http://download.zstack.org/releases/1.2/1.2.0/zstack-installer-1.2.0.bin
    bash zstack-installer-1.2.0.bin
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;upgrade&quot;&gt;8. Upgrade&lt;/h2&gt;


&lt;p&gt;You can upgrade your previous ZStack to 1.2 by:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    wget http://download.zstack.org/releases/1.2/1.2.0/zstack-installer-1.2.0.bin
    bash zstack-installer-1.2.0.bin -u
&lt;/code&gt;&lt;/pre&gt;
</description>
        <pubDate>Wed, 04 May 2016 00:00:00 +0800</pubDate>
        <link>http://zstack.org/blog/v1.2.html</link>
        <guid isPermaLink="true">http://zstack.org/blog/v1.2.html</guid>
        
        
        <category>blog</category>
        
      </item>
    
      <item>
        <title>ZStack v1.2 release</title>
        <description>&lt;p&gt;Hello everyone, I am Frank Zhang, the architect of ZStack. Today I am happy to
announce that ZStack v1.2 is released.&lt;/p&gt;

&lt;h1&gt;New Features And Enhancements&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#eip&quot;&gt;Distributed EIP&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#smp&quot;&gt;Shared Mount Point Primary Storage&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#db&quot;&gt;Database Periodical Backup&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#systemd&quot;&gt;Systemd Support&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cachemode&quot;&gt;KVM Cache Mode&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#userdata&quot;&gt;AWS EC2 Like Userdata&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;h1&gt;Installation And Upgrade&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#install&quot;&gt;Installation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#upgrade&quot;&gt;Upgrade&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;h2 id=&quot;eip&quot;&gt; 1. Distributed EIP &lt;/h2&gt;


&lt;p&gt;Distributed EIP is added as a new service type of flat network provider in this version. Users can apply an EIP(normally a public IP) to a VM on a private network dynamically without using a virtual router VM, since the EIP is created on the host where the VM is running. As the EIPs are scattered on different hosts we call it distributed EIP. Below is an overall architecutre showing that the distributed EIP is implemented through the Linux network namspace.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.2/eipoverview.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;p&gt;To enable the distributed EIP, users need to select the EIP service of the flat network service provider at the last step of creating a L3 network.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.2/eip1.png&quot; class=&quot;center-img img-responsive&quot;&gt;
&lt;img src=&quot;/images/1.2/eip2.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;p&gt;For the usage of EIP, please refer the chapter 15 of the tutorial &lt;a href=&quot;http://zstack.org/tutorials/ec2-ui.html&quot;&gt;Amazon EC2 classic EIP zone&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;smp&quot;&gt;2. Shared Mount Point Primary Storage&lt;/h2&gt;


&lt;p&gt;In order to support vast POSIX compatible distributed filesystems, we add a new type of primary storage called shared mount point storage in this version. The idea is that users can use any distributed filesystems(e.g. OCFS2, GlusterFS, MooseFS) as primary storage, as long as those filesystems are pre-mounted on the KVM hosts.&lt;/p&gt;

&lt;p&gt;Below is an example of adding a shared mount point primary storage, the URL is the absolute path of the folder where the distributed filesystem is
mounted.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;we suggest users changing /etc/rc.local or /etc/fstab to make the distributed filesystem automatically mount during Linux booting, otherwise you
will be unable to start a created VM or create a VM on your local storage.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.2/smp.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;db&quot;&gt;3. Database Periodical Backup&lt;/h2&gt;


&lt;p&gt;In this version, a new command &lt;code&gt;zstack-ctl dump_mysql&lt;/code&gt; is added for users to backup ZStack database.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    [root@172-20-12-46 ~]# zstack-ctl dump_mysql -h
    usage: zstackctl dump_mysql [-h] [--file-name FILE_NAME]
                          [--keep-amount KEEP_AMOUNT]

    optional arguments:
    -h, --help            show this help message and exit
    --file-name FILE_NAME
                        The filename you want to save the database, default is
                        &#39;zstack-backup-db&#39;
    --keep-amount KEEP_AMOUNT
                        The amount of backup files you want to keep, older
                        backup files will be deleted, default number is 60
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Once the all-in-one installation is done, a &lt;code&gt;crontab&lt;/code&gt; task is created as following to periodically backup your database:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  30 0,12 * * * zstack-ctl dump_mysql --keep-amount 14
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;you can change the setting by &lt;code&gt;crontab -e&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;systemd&quot;&gt;4. Systemd Support&lt;/h2&gt;


&lt;p&gt;Systemd is supported in this version. You can use &lt;code&gt;systemctl&lt;/code&gt; to control ZStack management nodes&#39; lifecycle and make them start during Linux booting.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.2/systemd.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;cachemode&quot;&gt;5. KVM Cache Mode&lt;/h2&gt;


&lt;p&gt;In this version, users can configure the &lt;code&gt;cache mode&lt;/code&gt; of volumes on the KVM hosts by a global configuration. There are three modes supported now:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;none&lt;/strong&gt;: With caching mode set to none, the host page cache is disabled, but the disk write cache is enabled for the guest. In this mode, the write performance in the guest is optimal because write operations bypass the host page cache and go directly to the disk write cache. If the disk write cache is battery-backed, or if the applications or storage stack in the guest transfer data properly (either through fsync operations or file system barriers), then data integrity can be ensured. However, because the host page cache is disabled, the read performance in the guest would not be as good as in the modes where the host page cache is enabled, such as writethrough mode.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;writeback&lt;/strong&gt;: With caching set to writeback mode, both the host page cache and the disk write cache are enabled for the guest. Because of this, the I/O performance for applications running in the guest is good, but the data is not protected in a power failure. As a result, this caching mode is recommended only for temporary data where potential data loss is not a concern.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;writethrough&lt;/strong&gt;: writethrough mode is the default caching mode. With caching set to writethrough mode, the host page cache is enabled, but the disk write cache is disabled for the guest. Consequently, this caching mode ensures data integrity even if the applications and storage stack in the guest do not transfer data to permanent storage properly (either through fsync operations or file system barriers). Because the host page cache is enabled in this mode, the read performance for applications running in the guest is generally better. However, the write performance might be reduced because the disk write cache is disabled.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;For details of KVM cache mode you can refer &lt;a href=&quot;https://www.ibm.com/support/knowledgecenter/linuxonibm/liaat/liaatbpkvmguestcache.htm&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The global configuration can be changed through UI or command line:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.2/cachemode.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt;&amp;gt;UpdateGlobalConfig category=kvm name=vm.cacheMode value=writethrough
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;userdata&quot;&gt;6. AWS EC2 Way To Access Userdata&lt;/h2&gt;


&lt;p&gt;Beginning at the version 1.0, ZStack supports AWS EC2 userdata with cloud-init. However, the original way to access userdata is CloudStack like, which requires users to change the default configuration of cloud-init package and sometimes make people confused. In this version, ZStack starts using AWS EC2 way to distribute userdata, which means users can access userdata/metadata by a special IP address(169.254.169.254). It&#39;s also the default way that cloud-init fetches userdata, so users can directly use cloud-init built-in packages from CentOS and Ubuntu, without any modification.&lt;/p&gt;

&lt;h2 id=&quot;install&quot;&gt;7. Installation&lt;/h2&gt;


&lt;p&gt;You can install the 1.2 release by:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    wget http://download.zstack.org/releases/1.2/1.2.0/zstack-installer-1.2.0.bin
    bash zstack-installer-1.2.0.bin
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;upgrade&quot;&gt;8. Upgrade&lt;/h2&gt;


&lt;p&gt;You can upgrade your previous ZStack to 1.2 by:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    wget http://download.zstack.org/releases/1.2/1.2.0/zstack-installer-1.2.0.bin
    bash zstack-installer-1.2.0.bin -u
&lt;/code&gt;&lt;/pre&gt;
</description>
        <pubDate>Wed, 04 May 2016 00:00:00 +0800</pubDate>
        <link>http://zstack.org/cn/blog/v1.2.html</link>
        <guid isPermaLink="true">http://zstack.org/cn/blog/v1.2.html</guid>
        
        
        <category>blog</category>
        
      </item>
    
      <item>
        <title>ZStack v1.2 发布</title>
        <description>&lt;h2&gt;ZStack 1.2 版本今天正式发布&lt;/h2&gt;

&lt;p&gt;ZStack 1.2 版本今天发布，欢迎大家下载试用。在该版中，我们修复了1.1版本中发现的bug，并增加了分布EIP、shared mountpoint主存储支持、数据库自动备份、Systemd支持等新功能。用户不再需要使用Virtual Router就可以使用EIP网络模式，也可以无缝的使用GlusterFS、MooseFS、OCFS2等分布式文件系统作为主存储。具体细节参考以下章节。&lt;/p&gt;

&lt;h2&gt;新增功能&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#eip&quot;&gt;分布式EIP&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#smp&quot;&gt;Shared Mountpoint主存储&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#database&quot;&gt;数据库定时备份&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#systemd&quot;&gt;Systemd支持&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cachemode&quot;&gt;KVM缓存模式配置&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#userdata&quot;&gt;AWS EC2模式Userdata支持&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;h2&gt;安装升级&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#install&quot;&gt;安装&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#offlineinstall&quot;&gt;离线安装&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#upgrade&quot;&gt;升级&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;h3 id=&quot;eip&quot;&gt;1. 分布式EIP &lt;/h3&gt;


&lt;p&gt;在1.0版本中，我们增加了一个新的网络服务组件：FlatNetwork Provider，可以提供分布式DHCP支持。在1.2版本中，我们继续增强了该provider的功能，加入了分布式EIP支持。通过这种方式，用户无需再使用传统的virtual router方式就可以部署EIP网络模型，拥有独立的私有网络，并将公网IP地址映射到私有网络的中的云主机去。ZStack的分布式EIP通过Linux的network namespace实现，原理图如下：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.2/eipoverview.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;p&gt;要使用分布式EIP，用户只需在创建L3网络的时候，选择Flat Network Service Provider作为网络服务提供组件，并选择加载EIP服务即可。步骤如图：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.2/eip1.png&quot; class=&quot;center-img img-responsive&quot;&gt;
&lt;img src=&quot;/images/1.2/eip2.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;p&gt;要绑定EIP到私有网络的云主机，参考教程&lt;a href=&quot;http://zstack.org/cn/tutorials/ec2-ui.html&quot;&gt;经典Amazon EC2 EIP环境&lt;/a&gt;第15节即可。&lt;/p&gt;

&lt;h3 id=&quot;smp&quot;&gt;2. Shared Mountpoint主存储&lt;/h3&gt;


&lt;p&gt;在1.2版本中，我们新增了一种主存储(Primary Storage)类型：Shared Mountpoint Storage。通过该主存储，ZStack可以支持任何符合POSIX文件系统规范的分布式文件系统，例如大家熟悉的GlusterFS、MooseFS、OCFS2等。&lt;/p&gt;

&lt;p&gt;在使用前，用户需要先部署好你所使用的分布式文件系统，并将它mount到所有host相同的目录上，例如将GlusterFS mount到所有host的/glusterfs_dir目录中。在添加主存储时，选择类型“SharedMountPoint”并输入对应目录绝对路径即可，如图：&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;我们建议用户把mount分布式文件系统的命令放到每个host的/etc/rc.local或/etc/fstab当中，以避免host重启后，分布式文件系统没有挂载的情况。&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.2/smp.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;h3 id=&quot;database&quot;&gt;3. 数据库定时备份&lt;/h3&gt;


&lt;p&gt;在1.2版本中，我们提供了一个新的命令&lt;code&gt;zstack-ctl dump_mysql&lt;/code&gt;为用户备份ZStack的数据库：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    [root@172-20-12-46 ~]# zstack-ctl dump_mysql -h
    usage: zstackctl dump_mysql [-h] [--file-name FILE_NAME]
                                [--keep-amount KEEP_AMOUNT]

    optional arguments:
        -h, --help            show this help message and exit
        --file-name FILE_NAME
                              The filename you want to save the database, default is
                              &#39;zstack-backup-db&#39;
        --keep-amount KEEP_AMOUNT
                              The amount of backup files you want to keep, older
                              backup files will be deleted, default number is 60
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;在使用zstack all-in-one安装包安装后，我们会默认建立一个&lt;code&gt;crontab&lt;/code&gt;任务定时备份数据库，其设置为：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;30 0,12 * * * zstack-ctl dump_mysql --keep-amount 14
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;用户可以用&lt;code&gt;crontab -l&lt;/code&gt;的命令查看，或用&lt;code&gt;crontab -e&lt;/code&gt;修改。&lt;/p&gt;

&lt;h3 id=&quot;cachemode&quot;&gt;5. KVM cache mode选项&lt;/h3&gt;


&lt;p&gt;在1.2版本中，用户可以通过修改全局设置的来指定启动云主机时，KVM对云盘使用的缓存模式。支持三种模式：&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;none:云主机不使用物理机的页面缓存，直接访问存储，不带cache。&lt;strong&gt;默认模式&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;writethrough:物理机的页面缓存工作在透写模式，数据完全写入云主机存储设备后，才返回成功。&lt;/li&gt;
&lt;li&gt;writeback:云主机使用了物理机的页面缓存机制，数据写入物理机页面缓存即报告给云主机返回成功。&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;KVM cache mode的具体解释可以参考&lt;a href=&quot;https://www.ibm.com/support/knowledgecenter/linuxonibm/liaat/liaatbpkvmguestcache.htm&quot;&gt;这篇文章&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;要修改该选项，可以使用UI：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.2/cachemode.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;p&gt;或命令行：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt;&amp;gt;UpdateGlobalConfig category=kvm name=vm.cacheMode value=writethrough
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;userdata&quot;&gt;6. AWS EC2模式Userdata支持&lt;/h3&gt;


&lt;p&gt;在1.0版本中，我们加入了对userdata的支持，使用的是CloudStack默认，用户需要修改cloud-init配置文件才能使用。在1.2版本中，我们将userdata的支持方式换成了AWS EC2模式，即云主机操作系统可以通过169.254.169.254这个IP地址获得userdata。该模式是cloud-init的默认模式，用户只需安装cloud-init包，无需修改任何配置就可以直接使用。此外，用户也可以从Ubuntu和Centos的官方网站上下载预装cloud-init的镜像直接使用。&lt;/p&gt;

&lt;h3 id=&quot;systemd&quot;&gt;7. Systemd支持&lt;/h3&gt;


&lt;p&gt;在1.2版本中，我们加入了对systemd的支持，用户可以通过&lt;code&gt;systemctl&lt;/code&gt;来控制zstack管理节点的生命周期。这同时修复了安装了zstack管理节点关机慢的问题。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.2/systemd.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;h3 id=&quot;install&quot;&gt;8. 安装&lt;/h3&gt;


&lt;p&gt;你可以通过下面方式安装：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    wget http://download.zstack.org/releases/1.2/1.2.0/zstack-installer-1.2.0.bin
    bash zstack-installer-1.2.0.bin -R aliyun
&lt;/code&gt;&lt;/pre&gt;

&lt;blockquote&gt;&lt;p&gt;这里&lt;code&gt;-R aliyun&lt;/code&gt;参数指定使用阿里云的源进行安装，你也可以使用&lt;code&gt;-R 163&lt;/code&gt;使用网易的源。我们推荐使用阿里云的源&lt;/p&gt;&lt;/blockquote&gt;

&lt;h3 id=&quot;offlineinstall&quot;&gt;9. 离线安装&lt;/h3&gt;


&lt;p&gt;针对内网用户,以及访问Internet速度较慢的用户.ZStack 1.2 提供了离线安装方式.
用户若需要离线安装ZStack,需要在目标管理节点和计算节点上安装CentOS 7.2 ZStack社区版.&lt;/p&gt;

&lt;p&gt;然后在下载了第8步中的 zstack-installer 之后,你可以通过下面方式快速完成离线安装：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    bash zstack-installer-1.2.0.bin -o
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;具体的离线安装教程和CentOS 7.2 ZStack社区版请阅读: &lt;a href=&quot;./offline-install-zstack-from-custom-iso.html&quot;&gt;ZStack离线安装教程&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;upgrade&quot;&gt;10. 升级 &lt;/h3&gt;


&lt;p&gt;一如既往的，我们支持一键无缝升级：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    wget http://download.zstack.org/releases/1.2/1.2.0/zstack-installer-1.2.0.bin
    bash zstack-installer-1.2.0.bin -u
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;多节点升级中的zstack.war请等待正式版发布。&lt;/p&gt;
</description>
        <pubDate>Fri, 29 Apr 2016 00:00:00 +0800</pubDate>
        <link>http://zstack.org/cn_blog/v1.2.html</link>
        <guid isPermaLink="true">http://zstack.org/cn_blog/v1.2.html</guid>
        
        
        <category>cn_blog</category>
        
      </item>
    
      <item>
        <title>ZStack v1.2 RC1 发布</title>
        <description>&lt;h2&gt;ZStack 1.2 RC1 版本今天发布&lt;/h2&gt;

&lt;p&gt;ZStack 1.2 RC1 版本今天发布，欢迎大家下载试用。在该版中，我们修复了1.1版本中发现的bug，并增加了分布EIP、shared mountpoint主存储支持、数据库自动备份、Systemd支持等新功能。用户不再需要使用Virtual Router就可以使用EIP网络模式，也可以无缝的使用GlusterFS、MooseFS、OCFS2等分布式文件系统作为主存储。具体细节参考以下章节。&lt;/p&gt;

&lt;h2&gt;新增功能&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#eip&quot;&gt;分布式EIP&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#smp&quot;&gt;Shared Mountpoint主存储&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#database&quot;&gt;数据库定时备份&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#systemd&quot;&gt;Systemed支持&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cachemode&quot;&gt;KVM缓存模式配置&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#userdata&quot;&gt;AWS EC2模式Userdata支持&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;h2&gt;安装升级&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#install&quot;&gt;安装&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#offlineinstall&quot;&gt;离线安装&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#upgrade&quot;&gt;升级&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;h3 id=&quot;eip&quot;&gt;1. 分布式EIP &lt;/h3&gt;


&lt;p&gt;在1.0版本中，我们增加了一个新的网络服务组件：FlatNetwork Provider，可以提供分布式DHCP支持。在1.2版本中，我们继续增强了该provider的功能，加入了分布式EIP支持。通过这种方式，用户无需再使用传统的virtual router方式就可以部署EIP网络模型，拥有独立的私有网络，并将公网IP地址映射到私有网络的中的云主机去。ZStack的分布式EIP通过Linux的network namespace实现，原理图如下：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.2/eipoverview.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;p&gt;要使用分布式EIP，用户只需在创建L3网络的时候，选择Flat Network Service Provider作为网络服务提供组件，并选择加载EIP服务即可。步骤如图：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.2/eip1.png&quot; class=&quot;center-img img-responsive&quot;&gt;
&lt;img src=&quot;/images/1.2/eip2.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;p&gt;要绑定EIP到私有网络的云主机，参考教程&lt;a href=&quot;http://zstack.org/cn/tutorials/ec2-ui.html&quot;&gt;经典Amazon EC2 EIP环境&lt;/a&gt;第15节即可。&lt;/p&gt;

&lt;h3 id=&quot;smp&quot;&gt;2. Shared Mountpoint主存储&lt;/h3&gt;


&lt;p&gt;在1.2版本中，我们新增了一种主存储(Primary Storage)类型：Shared Mountpoint Storage。通过该主存储，ZStack可以支持任何符合POSIX文件系统规范的分布式文件系统，例如大家熟悉的GlusterFS、MooseFS、OCFS2等。&lt;/p&gt;

&lt;p&gt;在使用前，用户需要先部署好你所使用的分布式文件系统，并将它mount到所有host相同的目录上，例如将GlusterFS mount到所有host的/glusterfs_dir目录中。在添加主存储时，选择类型“SharedMountPoint”并输入对应目录绝对路径即可，如图：&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;我们建议用户把mount分布式文件系统的命令放到每个host的/etc/rc.local或/etc/fstab当中，以避免host重启后，分布式文件系统没有挂载的情况。&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.2/smp.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;h3 id=&quot;database&quot;&gt;3. 数据库定时备份&lt;/h3&gt;


&lt;p&gt;在1.2版本中，我们提供了一个新的命令&lt;code&gt;zstack-ctl dump_mysql&lt;/code&gt;为用户备份ZStack的数据库：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    [root@172-20-12-46 ~]# zstack-ctl dump_mysql -h
    usage: zstackctl dump_mysql [-h] [--file-name FILE_NAME]
                                [--keep-amount KEEP_AMOUNT]

    optional arguments:
        -h, --help            show this help message and exit
        --file-name FILE_NAME
                              The filename you want to save the database, default is
                              &#39;zstack-backup-db&#39;
        --keep-amount KEEP_AMOUNT
                              The amount of backup files you want to keep, older
                              backup files will be deleted, default number is 60
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;在使用zstack all-in-one安装包安装后，我们会默认建立一个&lt;code&gt;crontab&lt;/code&gt;任务定时备份数据库，其设置为：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;30 0,12 * * * zstack-ctl dump_mysql --keep-amount 14
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;用户可以用&lt;code&gt;crontab -l&lt;/code&gt;的命令查看，或用&lt;code&gt;crontab -e&lt;/code&gt;修改。&lt;/p&gt;

&lt;h3 id=&quot;cachemode&quot;&gt;5. KVM cache mode选项&lt;/h3&gt;


&lt;p&gt;在1.2版本中，用户可以通过修改全局设置的来指定启动云主机时，KVM对云盘使用的缓存模式。支持三种模式：&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;none:云主机不使用物理机的页面缓存，直接访问存储，不带cache。&lt;strong&gt;默认模式&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;writethrough:物理机的页面缓存工作在透写模式，数据完全写入云主机存储设备后，才返回成功。&lt;/li&gt;
&lt;li&gt;writeback:云主机使用了物理机的页面缓存机制，数据写入物理机页面缓存即报告给云主机返回成功。&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;KVM cache mode的具体解释可以参考&lt;a href=&quot;https://www.ibm.com/support/knowledgecenter/linuxonibm/liaat/liaatbpkvmguestcache.htm&quot;&gt;这篇文章&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;要修改该选项，可以使用UI：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.2/cachemode.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;p&gt;或命令行：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt;&amp;gt;UpdateGlobalConfig category=kvm name=vm.cacheMode value=writethrough
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;userdata&quot;&gt;6. AWS EC2模式Userdata支持&lt;/h3&gt;


&lt;p&gt;在1.0版本中，我们加入了对userdata的支持，使用的是CloudStack默认，用户需要修改cloud-init配置文件才能使用。在1.2版本中，我们将userdata的支持方式换成了AWS EC2模式，即云主机操作系统可以通过169.254.169.254这个IP地址获得userdata。该模式是cloud-init的默认模式，用户只需安装cloud-init包，无需修改任何配置就可以直接使用。此外，用户也可以从Ubuntu和Centos的官方网站上下载预装cloud-init的镜像直接使用。&lt;/p&gt;

&lt;h3 id=&quot;systemd&quot;&gt;7. Systemd支持&lt;/h3&gt;


&lt;p&gt;在1.2版本中，我们加入了对systemd的支持，用户可以通过&lt;code&gt;systemctl&lt;/code&gt;来控制zstack管理节点的生命周期。这同时修复了安装了zstack管理节点关机慢的问题。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/1.2/systemd.png&quot; class=&quot;center-img img-responsive&quot;&gt;&lt;/p&gt;

&lt;h3 id=&quot;install&quot;&gt;8. 安装&lt;/h3&gt;


&lt;p&gt;你可以通过下面方式安装：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    wget http://download.zstack.org/releases/1.2/1.2.0/rc2/zstack-installer-1.2.0-rc2.bin
    bash zstack-installer-1.2.0-rc2.bin -R aliyun
&lt;/code&gt;&lt;/pre&gt;

&lt;blockquote&gt;&lt;p&gt;这里&lt;code&gt;-R aliyun&lt;/code&gt;参数指定使用阿里云的源进行安装，你也可以使用&lt;code&gt;-R 163&lt;/code&gt;使用网易的源。我们推荐使用阿里云的源&lt;/p&gt;&lt;/blockquote&gt;

&lt;h3 id=&quot;offlineinstall&quot;&gt;9. 离线安装&lt;/h3&gt;


&lt;p&gt;针对内网用户,以及访问Internet速度较慢的用户.ZStack 1.2 提供了离线安装方式.
用户若需要离线安装ZStack,需要在目标管理节点和计算节点上安装CentOS 7.2 ZStack社区版.&lt;/p&gt;

&lt;p&gt;然后在下载了第8步中的 zstack-installer 之后,你可以通过下面方式快速完成离线安装：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    bash zstack-installer-1.2.0-rc2.bin -o
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;具体的离线安装教程和CentOS 7.2 ZStack社区版请阅读: &lt;a href=&quot;./offline-install-zstack-from-custom-iso.html&quot;&gt;ZStack离线安装教程&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;upgrade&quot;&gt;10. 升级 &lt;/h3&gt;


&lt;p&gt;一如既往的，我们支持一键无缝升级：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    wget http://download.zstack.org/releases/1.2/1.2.0/rc2/zstack-installer-1.2.0-rc2.bin
    bash zstack-installer-1.2.0-rc2.bin -u
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;多节点升级中的zstack.war请等待正式版发布。&lt;/p&gt;
</description>
        <pubDate>Fri, 22 Apr 2016 00:00:00 +0800</pubDate>
        <link>http://zstack.org/cn_blog/v1.2-rc1.html</link>
        <guid isPermaLink="true">http://zstack.org/cn_blog/v1.2-rc1.html</guid>
        
        
        <category>cn_blog</category>
        
      </item>
    
  </channel>
</rss>
